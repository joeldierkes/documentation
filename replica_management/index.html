<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.74">
<link rel="alternate" type="application/rss+xml" href="/documentation/blog/rss.xml" title="Rucio Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documentation/blog/atom.xml" title="Rucio Documentation Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Rucio Documentation" href="/documentation/opensearch.xml">
<link rel="stylesheet" href="/documentation/css/custom.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:400,500,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Replica management with replication rules | Rucio Documentation</title><meta data-react-helmet="true" property="og:url" content="https://rucio.github.io/documentation/replica_management"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Replica management with replication rules | Rucio Documentation"><meta data-react-helmet="true" name="description" content="Replica management is based on replication rules defined on data"><meta data-react-helmet="true" property="og:description" content="Replica management is based on replication rules defined on data"><link data-react-helmet="true" rel="shortcut icon" href="/documentation/img/android-chrome-512x512.png"><link data-react-helmet="true" rel="canonical" href="https://rucio.github.io/documentation/replica_management"><link data-react-helmet="true" rel="alternate" href="https://rucio.github.io/documentation/replica_management" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rucio.github.io/documentation/replica_management" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/documentation/assets/css/styles.365df3eb.css">
<link rel="preload" href="/documentation/assets/js/styles.3cdac729.js" as="script">
<link rel="preload" href="/documentation/assets/js/runtime~main.0cb6de34.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.9341af73.js" as="script">
<link rel="preload" href="/documentation/assets/js/1.d26b08b7.js" as="script">
<link rel="preload" href="/documentation/assets/js/2.5c9197db.js" as="script">
<link rel="preload" href="/documentation/assets/js/303.5b871271.js" as="script">
<link rel="preload" href="/documentation/assets/js/306.a7c58c24.js" as="script">
<link rel="preload" href="/documentation/assets/js/935f2afb.e3f12d60.js" as="script">
<link rel="preload" href="/documentation/assets/js/17896441.7eaaae11.js" as="script">
<link rel="preload" href="/documentation/assets/js/8c25ef77.eeff7993.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/rucio_horizontaled_black.svg" alt="Rucio Documentation" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/documentation/img/rucio_horizontaled_white.svg" alt="Rucio Documentation" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Rucio Documentation</strong></a><a class="navbar__item navbar__link" href="/documentation/rucio_client_api">Client API</a><a class="navbar__item navbar__link" href="/documentation/rucio_rest_api">REST API</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/documentation/"><img src="/documentation/img/rucio_horizontaled_black.svg" alt="Rucio Documentation" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/documentation/img/rucio_horizontaled_white.svg" alt="Rucio Documentation" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Rucio Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/documentation/rucio_client_api">Client API</a></li><li class="menu__list-item"><a class="menu__link" href="/documentation/rucio_rest_api">REST API</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Replica management with replication rules</h1></header><div class="markdown"><p>Replica management is based on replication rules defined on data
identifiers (files, datasets, containers). A replication rule is owned
by an account and defines the minimum number of replicas to be available
on a list of RSEs, denoted by an <a href="/documentation/rse_expressions">RSE Expression</a>.
Accounts are allowed to set multiple rules<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>. Rules may optionally
have a limited lifetime and can be added, removed or modified at any
time.</p><p>An example listing of replication rules is given below:</p><ul><li>prod: 1x replica @ CERN, no lifetime</li><li>barisits: 1x replica @ US-T2, until 2019-01-01</li><li>vgaronne: 2x replica @ T1, no lifetime</li></ul><p>A rule engine validates the rules and creates transfer primitives to
fulfil all rules, e.g. transfer a file from RSE A to RSE B. The rule
engine is triggered when a new rule is defined on an existing data
identifier, or when a file is added to a dataset with existing rules.
The rule engine will only create the minimum set of necessary transfer
primitives to satisfy all rules.</p><p>Notifications can be provided for rules and their underlying transfer
requests. All transfer requests are transient.</p><p>The deletion service supports two different modes: greedy and
non-greedy. Greedy means that the service tries to immediately delete
all replicas which are not protected by a replication rule. Non-greedy
deletion is triggered when storage policy dictates that space must be
freed. The deletion service will look for replicas on that RSE which can
be deleted without violating any replication rule. The deletion service
will use a Least Recently Used (LRU) algorithm to select replicas for
deletion. The deletion service will also immediately delete all replicas
of any file which is declared obsolete.</p><p>Some examples of replication rules are listed
<a href="/documentation/replication_rules_examples">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="footnotes"></a>Footnotes<a class="hash-link" href="#footnotes" title="Direct link to heading">#</a></h2><div class="footnotes"><hr><ol><li id="fn-1">The system may reject rules if these violate other policies, e.g.,
only specific accounts are allowed to request replication rules for
tape systems.<a href="#fnref-1" class="footnote-backref">â†©</a></li></ol></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/rucio/documentation/tree/main/docs/../docs/replica_management.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-02-28T09:23:10.000Z" class="lastUpdatedDate_nN9m">2/28/2022</time> by <strong>Martin Barisits</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#footnotes" class="table-of-contents__link">Footnotes</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/documentation/img/rucio_horizontaled_black.svg" alt="" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/documentation/img/rucio_horizontaled_white.svg" alt="" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 CERN</div></div></div></footer></div>
<script src="/documentation/assets/js/styles.3cdac729.js"></script>
<script src="/documentation/assets/js/runtime~main.0cb6de34.js"></script>
<script src="/documentation/assets/js/main.9341af73.js"></script>
<script src="/documentation/assets/js/1.d26b08b7.js"></script>
<script src="/documentation/assets/js/2.5c9197db.js"></script>
<script src="/documentation/assets/js/303.5b871271.js"></script>
<script src="/documentation/assets/js/306.a7c58c24.js"></script>
<script src="/documentation/assets/js/935f2afb.e3f12d60.js"></script>
<script src="/documentation/assets/js/17896441.7eaaae11.js"></script>
<script src="/documentation/assets/js/8c25ef77.eeff7993.js"></script>
</body>
</html>